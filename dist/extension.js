(()=>{"use strict";var e={496:e=>{e.exports=require("vscode")},147:e=>{e.exports=require("fs")},17:e=>{e.exports=require("path")}},o={};function t(r){var n=o[r];if(void 0!==n)return n.exports;var i=o[r]={exports:{}};return e[r](i,i.exports,t),i.exports}var r={};(()=>{var e=r;Object.defineProperty(e,"__esModule",{value:!0}),e.create_JSON_file_if_not_exist=e.resetDecoration=e.removeAllJSONFromDirectory=e.deactivate=e.activate=void 0;const o=t(496),n=t(147),i=t(17);var s=[];function c(){d(s)}function a(e){return null==e&&(e="plaintext"),o.env.appRoot+"/word-recolor/"+e+".json"}function d(e){for(const o of e)o.decorationTypeArr.dispose(),o.ranges.length=0;e.length=0}function l(e,o){let t,r,i="",s="",c="",a=__dirname+"/../jsonFile/"+o+".json";t=e.split("/"),t.pop(),r=t.join("/"),n.existsSync(e)||(n.existsSync(a)&&(i=n.readFileSync(a,"utf-8"),s=JSON.parse(i),c=JSON.stringify(s,null,4)),n.existsSync(r)||n.mkdir(r,{recursive:!0},(e=>{e?console.error(e):console.log(r+" created")})),n.writeFileSync(e,c,"utf8"))}e.activate=function e(t){let r=o.commands.registerCommand("wordrecolor.activate",(()=>{let e;function r(){let e=function(){let e,t=o.window.activeTextEditor;return e=t?t.document.languageId:"No language detected",e}(),t=a(e);l(t,e);let r=function(e){let o=n.readFileSync(e,"utf8");return JSON.parse(o)}(t);var i=o.window.activeTextEditor;if(!i)return;var c=i.document,d=c.getText(),u=[];let p=Object.keys(r);for(let e of p){let t=r[e];for(let e of t){let t,r=new RegExp("\\b("+e+")\\b","gi");for(;t=r.exec(d);){const e=c.positionAt(t.index),r=c.positionAt(t.index+t[0].length),n=new o.Range(e,r);u.push(n)}}s.push({decorationTypeArr:o.window.createTextEditorDecorationType({color:e}),ranges:[...u]})}for(const e of s){let o=e.decorationTypeArr,t=e.ranges;i.setDecorations(o,t)}}function i(){e&&(clearTimeout(e),e=void 0),e=setTimeout(r,500)}o.window.activeTextEditor&&(o.window.activeTextEditor&&(d(s),i()),o.window.onDidChangeActiveTextEditor((e=>{e&&(d(s),i())}),null,t.subscriptions),o.workspace.onDidChangeTextDocument((e=>{o.window.activeTextEditor&&e.document===o.window.activeTextEditor.document&&(d(s),i())}),null,t.subscriptions))})),i=o.commands.registerCommand("wordrecolor.showPath",(()=>{let e=a(null);o.window.showInformationMessage(e)})),u=o.commands.registerCommand("wordrecolor.clear",(()=>{d(s)})),p=o.commands.registerCommand("wordrecolor.restart",(()=>{c(),e(t)}));t.subscriptions.push(r),t.subscriptions.push(i),t.subscriptions.push(u),t.subscriptions.push(p)},e.deactivate=c,e.removeAllJSONFromDirectory=function(){const e=a(null),o=i.dirname(e);n.existsSync(o)&&n.readdir(o,((e,t)=>{e?console.error(`Error reading directory: ${e.message}`):t.forEach((e=>{const t=i.join(o,e);n.unlink(t,(e=>{e&&console.error(`Error deleting file: ${t} - ${e.message}`)}))}))}))},e.resetDecoration=d,e.create_JSON_file_if_not_exist=l})(),module.exports=r})();